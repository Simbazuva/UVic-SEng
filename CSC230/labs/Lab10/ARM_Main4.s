@ ====================================================================
@ CSc 230  Lab #10
@ Main and Print Routines
@ ====================================================================

@ ====================================================================
@ Local Constants
@ ====================================================================
	.equ	SWI_Exit,      	0x11
	.equ	SWI_PrintInt,  	0x6B
	.equ	SWI_PrintChar, 	0x0
	.equ	Stdout,        	1

@ ====================================================================
@ Exported Symbols
@ ====================================================================
	.global	_start
	.global	Print

@ ====================================================================
@ Imported Symbols
@ ====================================================================
	.extern	Compute

@ ====================================================================
	.text
@ ====================================================================

@ ====================================================================
@ main()
@ ====================================================================
_start:
	ldr	r0, =inputs
	bl	Compute
End:
	swi	SWI_Exit
	
@ ====================================================================
@ Print(R0:value)
@ ====================================================================
Print:
	stmfd	sp!, {r0,r1,lr} @ YES, we do need this!

	mov	r1, r0        @ R1:value-to-print = R0:arg1
	mov	r0, #Stdout   @ print to console
	swi	SWI_PrintInt  @ PrintInt(R0:where, R1:value)
	mov	r0, #0x0A     @ ASCII new-line character
	swi	SWI_PrintChar @ PrintChar(R0:value)

	ldmfd	sp!, {r0,r1,pc} @ YES, we do need this!

@ ====================================================================
	.data
@ ====================================================================

inputs:	.word	0, 1, 2, 3, 4, -1

@ ====================================================================
	.end
